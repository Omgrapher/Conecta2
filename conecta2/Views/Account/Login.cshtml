@using conecta2.Models
@using System.Text.Json
@model conecta2.Models.LoginViewModel

@{
    Layout = "LayoutLogin";
    ViewData["Title"] = "Iniciar Sesión";
}

<body class="bg-light" style="height: 100vh;">
    <div class="d-flex justify-content-center align-items-center vh-100">
        <form asp-action="Login" method="post" class="border rounded shadow-sm p-4 bg-white shadow" style="max-width: 400px; width: 100%;">
            <div class="mb-4 text-center">
                <i class="bi bi-alexa" style="font-size: 3rem; color: #007bff;"></i> <!-- Ícono en la parte superior -->
                <h2 class="fw-bold">Iniciar Sesión</h2>
            </div>

            <!-- Campo para el Usuario -->
            <div class="mb-3">
                <div class="form-floating">
                    <input asp-for="Username" class="form-control" placeholder="Ingresa tu usuario"/>
                    <label asp-for="Username">Usuario</label>
                </div>
                <span asp-validation-for="Username" class="text-danger"></span>
            </div>

            <!-- Campo para la Contraseña -->
            <div class="mb-3">
                <div class="form-floating">
                    <input asp-for="Password" type="password" class="form-control" placeholder="Ingresa tu contraseña"/>
                    <label asp-for="Password">Contraseña</label>
                </div>
                <span asp-validation-for="Password" class="text-danger"></span>
            </div>

            <!-- Botón de enviar -->
            <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">Ingresar</button>
            </div>
        </form>
    </div>

    <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorModalLabel">Errores de Validación</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul id="errorList">
                        @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
                        {
                            <li>@error.ErrorMessage</li>
                        }
                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Éxito -->
    <div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="successModalLabel">Éxito!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    @TempData["SuccessMessage"]
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Error -->
    <div class="modal fade" id="errorModal" tabindex="-1" aria-labelledby="errorModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorModalLabel">Error!</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    @TempData["ErrorMessage"]
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>
</body>
